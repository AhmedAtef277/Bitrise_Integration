
default_platform(:ios)

platform :ios do

lane :ci_pipeline do
    build
    test
    lint
end

  desc "test lane for bitrise integration "
  lane :build do
    gym(
    project: "BitriseIntegration.xcodeproj",
    configuration: "Debug",
    scheme: "BitriseIntegration",
    silent: true,
    clean: true,
    skip_archive: true,
    export_method: "development",
    skip_codesigning: true   # Disable code signing for development builds
  )
  end

desc "run unit test"
lane :test do
  scan(
	scheme: "BitriseIntegration",
	device: "iPhone 15"
)
end

lane :lint do
  swiftlint(
    mode: :lint,
    config_file: "swiftlint-ci.yml",
    ignore_exit_status: true,
    quiet: true,
    strict: true
)
end
end
